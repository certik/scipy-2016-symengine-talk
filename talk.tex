\documentclass{beamer}

\usepackage[utf8]{inputenc}

\title[SymEngine \hspace{14em}\insertframenumber/
\inserttotalframenumber]{SymEngine, a fast symbolic manipulation library}

\usepackage{graphicx}
\graphicspath{ {images/} }


\author[O. Čertík, I. Fernando, ...]{Ondřej Čertík, Isuru Fernando, Thilina Rathnayake, Abhinav Agarwal}

\begin{document}


\begin{frame}
\maketitle
\end{frame}


\begin{frame}{Outline}
\begin{block}{SymEngine}
\begin{itemize}
\item Introduction
\item Why C++
\item Features
\item Internals of SymEngine
\item SymPy, SymEngine and the interface
\item Benchmarks
\item Examples of usage
\end{itemize}
\end{block}
\end{frame}


\begin{frame}
\frametitle{Introduction}
\framesubtitle{About SymEngine}
\begin{itemize}
\item Symbolic manipulation library written in C++
\item Started in 2012
\item 35 contributors
\item Part of SymPy organization
\item MIT licensed
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Introduction}
\framesubtitle{Goals}
\begin{itemize}
\item Be the fastest in symbolic manipulation (opensource or commercial)
\item Serve as the core for SymPy
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Why C++}
\begin{itemize}
\item SymPy speed is insufficient to handle very large expressions.
\item Easier to create bindings to other languages like Python, Julia, Ruby and Haskell.
\end{itemize}
\end{frame}


\begin{frame}[fragile]
\frametitle{Features}
\framesubtitle{Symbolic differentiation in SymEngine}
\begin{verbatim}
>>> x = Symbol("x")
>>> y = Symbol("y")
>>> r = x*y+x
>>> gamma(r).diff(x)
(1 + y)*gamma(x + x*y)*polygamma(0, x + x*y)
\end{verbatim}
\end{frame}


\begin{frame}
\frametitle{Features}
\end{frame}


\begin{frame}
\frametitle{Internals of SymEngine}
\framesubtitle{Libraries used}
\begin{itemize}
\item Depends on GNU Multiple Precision library (GMP)
\item Optional dependencies include MPFR, MPC, Flint and Piranha
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Internals of SymEngine}
\framesubtitle{How Add, Mul and Pow works}
\end{frame}


\begin{frame}
\frametitle{Internals of SymEngine}
\framesubtitle{Extensibility using visitor pattern}
\end{frame}


\begin{frame}[fragile]
\frametitle{SymPy, SymEngine and the interface}
\framesubtitle{Using SymPy in SymEngine}
\begin{itemize}
\item
SymEngine will convert any SymPy object to a corresponding SymEngine object before doing any operation

\begin{verbatim}
>>> from symengine import symbols, Add
>>> import sympy
>>> x = symbols("x")
>>> y = sympy.symbols("y")
>>> x + y
x + y
>>> type(x+y)
<type 'symengine.lib.symengine_wrapper.Add'>
\end{verbatim}
\item
What if there is no corresponding SymEngine object?
\end{itemize}
\end{frame}


\begin{frame}[fragile]
\frametitle{SymPy, SymEngine and the interface}
\framesubtitle{Using SymPy in SymEngine}
\begin{itemize}
\item
SymEngine will keep a reference to a SymPy object if there is no corresponding SymEngine object using Python/C API.
SymEngine will use Python callbacks to evaluate the SymPy object

\begin{verbatim}

>>> e = x + sympy.loggamma(x)
>>> assert str(e) == "x + loggamma(x)"
>>> assert isinstance(e, Add)

>>> f = e.subs({x : 10})
>>> assert f == 10 + log(362880)

>>> f = e.subs({x : 2})
>>> assert f == 2
\end{verbatim}
\end{itemize}
\end{frame}


\begin{frame}[fragile]
\frametitle{SymPy, SymEngine and the interface}
\framesubtitle{Using SymEngine in SymPy}
\begin{itemize}
\item
\begin{verbatim}
>>> from sympy.core.backend import symbols, sin, diff
\end{verbatim}
\end{itemize}
\end{frame}




\begin{frame}
\frametitle{Benchmarks}
\framesubtitle{Modified GiNaC benchmark}
\begin{itemize}  
\item Let $e$ be the expanded sum of 2 symbols $\{a_0, a_1\}$ and $n-2$ trigonometric functions $\{sin(a_2), sin(a_3)...sin(a_n)\}$ squared:\\
e $\leftarrow (a_0+a_1+\sum_{i=2}^{n} sin(a_i))^2$    
\item Substitute $a_0 \leftarrow -\sum_{i=2}^{n} sin(a_i)$ 
\item Expand $e$ again so it collapses to $a_1^2$
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Benchmarks}
\framesubtitle{Modified GiNaC benchmark}
\includegraphics[width=10cm]{expand6b}
\end{frame}


\begin{frame}
\frametitle{Benchmarks}
\framesubtitle{Modified GiNaC benchmark}
Benchmarks were run in a Intel(R) Core(TM) i5-5200U CPU @ 2.20GHz
\begin{itemize}
 \item SymEngine 0.1.1 ??
 \item GiNaC 1.6.6
    \xxx
 \item SymPy 1.0
 \item Mathematica 10.2.0.0
 \item Maple 2015.2
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Benchmarks}
\framesubtitle{PyDy Benchmark}
\end{frame}


\begin{frame}
\frametitle{Benchmarks}
\framesubtitle{PyDy Benchmark}
\begin{table}
\begin{tabular}{l | c | c | c  }
n & SymEngine + SymPy & SymPy only & Speedup\\
\hline \hline
10 & 0.17 s & 5.58 s & 32.8x \\
15 & 0.44 s & 22.07 s & 50.1x \\
20 & 0.95 s & 45.59 s & 47.9x \\
30 & 3.11 s & 162.80 s & 52.3x \\
40 & 7.02 s & 427.16 s & 60.8x \\
50 & 13.95 s & 915.83 s & 65.6x \\
60 & 25.22 s & .......... & ...........
\end{tabular}
\caption{Results}
\end{table}
\end{frame}

\begin{frame}[fragile]
\frametitle{Examples of Usage}
\framesubtitle{Python}

\begin{verbatim}
$ conda install python-symengine --channel conda-forge
$ python
>>> from symengine import *
\end{verbatim}
% add more example scripts above
\end{frame}


\begin{frame}[fragile]
\frametitle{Examples of Usage}
\framesubtitle{Julia}

\begin{verbatim}
julia> Pkg.clone("https://github.com/symengine/SymEngine.jl")
julia> Pkg.build("SymEngine")
julia> using SymEngine
\end{verbatim}
% add more example scripts above
\end{frame}

\end{document}
